#!/usr/bin/env bb

(require '[babashka.pods :as pods])
(pods/load-pod "pod-babashka-filewatcher")
(require '[pod.babashka.filewatcher :as fw])

(require '[clojure.java.shell :refer [sh]])

(defn asciidoc []
  (println "Compiling asciidoc")
  (sh "script/compile")
  (println "Done"))

(fw/watch "src" (fn [_] (asciidoc)))
(asciidoc)

@(promise)
